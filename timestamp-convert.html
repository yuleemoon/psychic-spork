<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>时间戳转换工具 - 在线Unix时间戳转换</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <style>
        @layer utilities {
            .gradient-bg {
                background: linear-gradient(135deg, #3b82f6, #8b5cf6);
            }
            .timestamp-card {
                transition: all 0.2s ease;
            }
            .timestamp-card:hover {
                transform: translateY(-2px);
                box-shadow: 0 10px 15px -3px rgb(0 0 0 / 0.1), 0 4px 6px -4px rgb(0 0 0 / 0.1);
            }
        }
    </style>
</head>
<body class="bg-slate-50 min-h-screen font-sans">
    <header class="gradient-bg text-white py-4 shadow-md">
        <div class="container mx-auto px-4 flex justify-between items-center">
            <div class="flex items-center gap-2">
                <i class="fa fa-clock-o text-xl"></i>
                <h1 class="text-xl font-bold">时间戳转换工具</h1>
            </div>
            <a href="index.html" class="bg-white/20 hover:bg-white/30 px-4 py-2 rounded-lg transition-colors">
                返回工具列表
            </a>
        </div>
    </header>

    <main class="container mx-auto px-4 py-8 max-w-6xl">
        <div class="bg-white rounded-xl shadow-md p-6 mb-6">
            <h2 class="text-2xl font-bold mb-4 text-slate-800">Unix时间戳转换</h2>
            <p class="text-slate-600 mb-6">支持秒/毫秒时间戳与标准时间互转，提供时区选择和日期计算功能</p>
            
            <!-- 快速转换区域 -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                <!-- 当前时间戳卡片 -->
                <div class="timestamp-card bg-blue-50 border border-blue-100 rounded-lg p-4">
                    <h3 class="font-bold text-blue-800 mb-2 flex items-center">
                        <i class="fa fa-clock-o mr-2"></i>当前时间戳
                    </h3>
                    <div class="space-y-2">
                        <div>
                            <span class="text-xs text-slate-600">秒 (10位):</span>
                            <div class="font-mono text-lg font-bold text-blue-600" id="currentTimestampSec">0</div>
                        </div>
                        <div>
                            <span class="text-xs text-slate-600">毫秒 (13位):</span>
                            <div class="font-mono text-lg font-bold text-blue-600" id="currentTimestampMs">0</div>
                        </div>
                        <button onclick="copyToClipboard('currentTimestampSec')" class="text-xs bg-blue-100 text-blue-800 px-2 py-1 rounded mt-1 hover:bg-blue-200">
                            <i class="fa fa-copy mr-1"></i>复制秒级
                        </button>
                    </div>
                </div>
                
                <!-- 当前日期时间卡片 -->
                <div class="timestamp-card bg-green-50 border border-green-100 rounded-lg p-4">
                    <h3 class="font-bold text-green-800 mb-2 flex items-center">
                        <i class="fa fa-calendar mr-2"></i>当前日期时间
                    </h3>
                    <div class="space-y-2">
                        <div>
                            <span class="text-xs text-slate-600">本地时间:</span>
                            <div class="font-mono text-lg font-bold text-green-600" id="currentLocalTime">0</div>
                        </div>
                        <div>
                            <span class="text-xs text-slate-600">UTC时间:</span>
                            <div class="font-mono text-lg font-bold text-green-600" id="currentUtcTime">0</div>
                        </div>
                        <button onclick="copyToClipboard('currentLocalTime')" class="text-xs bg-green-100 text-green-800 px-2 py-1 rounded mt-1 hover:bg-green-200">
                            <i class="fa fa-copy mr-1"></i>复制本地时间
                        </button>
                    </div>
                </div>
                
                <!-- 日期计算卡片 -->
                <div class="timestamp-card bg-purple-50 border border-purple-100 rounded-lg p-4">
                    <h3 class="font-bold text-purple-800 mb-2 flex items-center">
                        <i class="fa fa-calculator mr-2"></i>日期计算
                    </h3>
                    <div class="space-y-2">
                        <div class="flex gap-2">
                            <input type="number" id="dateOffset" value="1" min="-1000" max="1000" 
                                class="w-1/3 border border-slate-300 rounded p-1 text-center text-sm">
                            <select id="dateOffsetUnit" class="w-2/3 border border-slate-300 rounded p-1 text-sm">
                                <option value="days">天</option>
                                <option value="hours">小时</option>
                                <option value="minutes">分钟</option>
                                <option value="seconds">秒</option>
                                <option value="months">月</option>
                                <option value="years">年</option>
                            </select>
                        </div>
                        <div class="flex gap-2">
                            <button onclick="calculateDate('add')" class="flex-1 bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm hover:bg-purple-200">
                                <i class="fa fa-plus mr-1"></i>增加
                            </button>
                            <button onclick="calculateDate('subtract')" class="flex-1 bg-purple-100 text-purple-800 px-2 py-1 rounded text-sm hover:bg-purple-200">
                                <i class="fa fa-minus mr-1"></i>减少
                            </button>
                        </div>
                        <div id="calculatedDate" class="font-mono text-sm font-bold text-purple-600 mt-1">计算结果将显示在这里</div>
                    </div>
                </div>
            </div>
            
            <!-- 主要转换区域 -->
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <!-- 时间戳转日期 -->
                <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center">
                        <i class="fa fa-arrow-down mr-2 text-blue-500"></i>时间戳 → 日期时间
                    </h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm text-slate-600 mb-1">输入时间戳</label>
                            <input type="text" id="timestampInput" placeholder="例如: 1735689600 或 1735689600000"
                                class="w-full border border-slate-300 rounded-lg p-2">
                            <div class="flex gap-2 mt-2">
                                <label class="flex items-center text-xs text-slate-600">
                                    <input type="radio" name="timestampType" value="seconds" checked class="mr-1">
                                    秒级 (10位)
                                </label>
                                <label class="flex items-center text-xs text-slate-600">
                                    <input type="radio" name="timestampType" value="milliseconds" class="mr-1">
                                    毫秒级 (13位)
                                </label>
                            </div>
                        </div>
                        
                        <div>
                            <label class="block text-sm text-slate-600 mb-1">时区选择</label>
                            <select id="timezoneSelect" class="w-full border border-slate-300 rounded-lg p-2">
                                <option value="local">本地时区</option>
                                <option value="UTC">UTC (协调世界时)</option>
                                <option value="GMT+8">GMT+8 (中国标准时间)</option>
                                <option value="GMT+0">GMT+0 (格林威治时间)</option>
                                <option value="GMT-5">GMT-5 (美国东部时间)</option>
                                <option value="GMT+9">GMT+9 (日本时间)</option>
                            </select>
                        </div>
                        
                        <button onclick="convertTimestampToDate()" class="w-full bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors">
                            <i class="fa fa-refresh mr-2"></i>转换为日期时间
                        </button>
                        
                        <div class="bg-white p-3 rounded-lg border border-slate-200 mt-3">
                            <h4 class="text-xs font-medium text-slate-500 mb-1">转换结果</h4>
                            <div id="timestampResult" class="font-mono text-base text-slate-800">
                                转换结果将显示在这里
                            </div>
                            <button onclick="copyToClipboard('timestampResult')" class="mt-2 text-xs bg-slate-100 text-slate-800 px-2 py-1 rounded hover:bg-slate-200">
                                <i class="fa fa-copy mr-1"></i>复制结果
                            </button>
                        </div>
                    </div>
                </div>
                
                <!-- 日期转时间戳 -->
                <div class="bg-slate-50 rounded-lg p-4 border border-slate-200">
                    <h3 class="font-bold text-slate-800 mb-3 flex items-center">
                        <i class="fa fa-arrow-up mr-2 text-green-500"></i>日期时间 → 时间戳
                    </h3>
                    
                    <div class="space-y-4">
                        <div>
                            <label class="block text-sm text-slate-600 mb-1">选择日期时间</label>
                            <input type="datetime-local" id="datetimeInput" 
                                class="w-full border border-slate-300 rounded-lg p-2">
                            <button onclick="setCurrentDatetime()" class="mt-2 text-xs bg-slate-100 text-slate-800 px-2 py-1 rounded hover:bg-slate-200">
                                <i class="fa fa-clock-o mr-1"></i>使用当前时间
                            </button>
                        </div>
                        
                        <div>
                            <label class="block text-sm text-slate-600 mb-1">输出格式</label>
                            <div class="flex gap-2">
                                <label class="flex items-center text-xs text-slate-600">
                                    <input type="radio" name="outputType" value="seconds" checked class="mr-1">
                                    秒级 (10位)
                                </label>
                                <label class="flex items-center text-xs text-slate-600">
                                    <input type="radio" name="outputType" value="milliseconds" class="mr-1">
                                    毫秒级 (13位)
                                </label>
                            </div>
                        </div>
                        
                        <button onclick="convertDateToTimestamp()" class="w-full bg-green-600 text-white px-4 py-2 rounded-lg hover:bg-green-700 transition-colors">
                            <i class="fa fa-refresh mr-2"></i>转换为时间戳
                        </button>
                        
                        <div class="bg-white p-3 rounded-lg border border-slate-200 mt-3">
                            <h4 class="text-xs font-medium text-slate-500 mb-1">转换结果</h4>
                            <div id="datetimeResult" class="font-mono text-base text-slate-800">
                                转换结果将显示在这里
                            </div>
                            <button onclick="copyToClipboard('datetimeResult')" class="mt-2 text-xs bg-slate-100 text-slate-800 px-2 py-1 rounded hover:bg-slate-200">
                                <i class="fa fa-copy mr-1"></i>复制结果
                            </button>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- 批量转换区域 -->
            <div class="mt-8 bg-slate-50 rounded-lg p-4 border border-slate-200">
                <h3 class="font-bold text-slate-800 mb-3 flex items-center">
                    <i class="fa fa-list mr-2 text-orange-500"></i>批量转换
                </h3>
                
                <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                    <div>
                        <label class="block text-sm text-slate-600 mb-1">批量输入 (每行一个时间戳/日期)</label>
                        <textarea id="batchInput" placeholder="例如:
1735689600
2025-01-01 00:00:00
1735689600000
2025/01/01"
                            class="w-full h-[150px] p-2 border border-slate-300 rounded-lg resize-y font-mono text-sm"></textarea>
                        <div class="flex gap-2 mt-2">
                            <label class="flex items-center text-xs text-slate-600">
                                <input type="radio" name="batchType" value="toDate" checked class="mr-1">
                                时间戳 → 日期
                            </label>
                            <label class="flex items-center text-xs text-slate-600">
                                <input type="radio" name="batchType" value="toTimestamp" class="mr-1">
                                日期 → 时间戳
                            </label>
                        </div>
                    </div>
                    
                    <div>
                        <label class="block text-sm text-slate-600 mb-1">批量结果</label>
                        <textarea id="batchOutput" readonly
                            class="w-full h-[150px] p-2 border border-slate-300 rounded-lg resize-y font-mono text-sm bg-white"></textarea>
                        <div class="flex gap-2 mt-2">
                            <button onclick="batchConvert()" class="flex-1 bg-orange-600 text-white px-2 py-1 rounded text-sm hover:bg-orange-700">
                                <i class="fa fa-refresh mr-1"></i>批量转换
                            </button>
                            <button onclick="copyToClipboard('batchOutput')" class="flex-1 bg-slate-100 text-slate-800 px-2 py-1 rounded text-sm hover:bg-slate-200">
                                <i class="fa fa-copy mr-1"></i>复制结果
                            </button>
                            <button onclick="document.getElementById('batchInput').value='';document.getElementById('batchOutput').value='';" 
                                class="bg-red-100 text-red-800 px-2 py-1 rounded text-sm hover:bg-red-200">
                                <i class="fa fa-times mr-1"></i>清空
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <footer class="bg-slate-800 text-white py-4 text-center text-sm">
        <p>© 2025 在线工具集 - 所有操作均在本地完成，不会上传您的数据</p>
    </footer>

    <script>
        // DOM元素
        const currentTimestampSec = document.getElementById('currentTimestampSec');
        const currentTimestampMs = document.getElementById('currentTimestampMs');
        const currentLocalTime = document.getElementById('currentLocalTime');
        const currentUtcTime = document.getElementById('currentUtcTime');
        const dateOffset = document.getElementById('dateOffset');
        const dateOffsetUnit = document.getElementById('dateOffsetUnit');
        const calculatedDate = document.getElementById('calculatedDate');
        const timestampInput = document.getElementById('timestampInput');
        const timezoneSelect = document.getElementById('timezoneSelect');
        const timestampResult = document.getElementById('timestampResult');
        const datetimeInput = document.getElementById('datetimeInput');
        const datetimeResult = document.getElementById('datetimeResult');
        const batchInput = document.getElementById('batchInput');
        const batchOutput = document.getElementById('batchOutput');
        
        // 初始化 - 设置当前时间
        function updateCurrentTime() {
            const now = new Date();
            const timestampSec = Math.floor(now.getTime() / 1000);
            const timestampMs = now.getTime();
            
            // 更新时间戳显示
            currentTimestampSec.textContent = timestampSec;
            currentTimestampMs.textContent = timestampMs;
            
            // 更新本地时间和UTC时间
            currentLocalTime.textContent = formatDateTime(now);
            currentUtcTime.textContent = formatUTCDateTime(now);
            
            // 设置默认日期时间输入
            if (!datetimeInput.value) {
                datetimeInput.value = formatDatetimeLocal(now);
            }
        }

        // 格式化日期时间
        function formatDateTime(date) {
            return `${date.getFullYear()}-${padZero(date.getMonth() + 1)}-${padZero(date.getDate())} ${padZero(date.getHours())}:${padZero(date.getMinutes())}:${padZero(date.getSeconds())}`;
        }

        // 格式化UTC日期时间
        function formatUTCDateTime(date) {
            return `${date.getUTCFullYear()}-${padZero(date.getUTCMonth() + 1)}-${padZero(date.getUTCDate())} ${padZero(date.getUTCHours())}:${padZero(date.getUTCMinutes())}:${padZero(date.getUTCSeconds())} (UTC)`;
        }

        // 格式化datetime-local输入值
        function formatDatetimeLocal(date) {
            return `${date.getFullYear()}-${padZero(date.getMonth() + 1)}-${padZero(date.getDate())}T${padZero(date.getHours())}:${padZero(date.getMinutes())}`;
        }

        // 补零
        function padZero(num) {
            return num.toString().padStart(2, '0');
        }

        // 复制到剪贴板
        function copyToClipboard(elementId) {
            const element = document.getElementById(elementId);
            const text = element.textContent.trim();
            
            if (!text || text === '转换结果将显示在这里' || text === '计算结果将显示在这里') {
                alert('没有可复制的内容');
                return;
            }
            
            navigator.clipboard.writeText(text).then(() => {
                const originalText = element.textContent;
                element.textContent = '已复制!';
                
                setTimeout(() => {
                    element.textContent = originalText;
                }, 1500);
            }).catch(err => {
                alert('复制失败: ' + err);
            });
        }

        // 日期计算
        function calculateDate(action) {
            const offset = parseInt(dateOffset.value) || 1;
            const unit = dateOffsetUnit.value;
            const date = new Date();
            
            switch (unit) {
                case 'days':
                    action === 'add' ? date.setDate(date.getDate() + offset) : date.setDate(date.getDate() - offset);
                    break;
                case 'hours':
                    action === 'add' ? date.setHours(date.getHours() + offset) : date.setHours(date.getHours() - offset);
                    break;
                case 'minutes':
                    action === 'add' ? date.setMinutes(date.getMinutes() + offset) : date.setMinutes(date.getMinutes() - offset);
                    break;
                case 'seconds':
                    action === 'add' ? date.setSeconds(date.getSeconds() + offset) : date.setSeconds(date.getSeconds() - offset);
                    break;
                case 'months':
                    action === 'add' ? date.setMonth(date.getMonth() + offset) : date.setMonth(date.getMonth() - offset);
                    break;
                case 'years':
                    action === 'add' ? date.setFullYear(date.getFullYear() + offset) : date.setFullYear(date.getFullYear() - offset);
                    break;
            }
            
            calculatedDate.textContent = `${formatDateTime(date)} (${action === 'add' ? '+' : '-'}${offset} ${unit})`;
            
            // 同时显示时间戳
            const timestampSec = Math.floor(date.getTime() / 1000);
            calculatedDate.textContent += ` | 时间戳: ${timestampSec}`;
        }

        // 时间戳转日期
        function convertTimestampToDate() {
            const timestamp = timestampInput.value.trim();
            if (!timestamp) {
                alert('请输入时间戳');
                return;
            }
            
            // 检查是否为数字
            if (isNaN(timestamp)) {
                alert('请输入有效的数字时间戳');
                return;
            }
            
            let ts = parseInt(timestamp);
            const isMilliseconds = document.querySelector('input[name="timestampType"][value="milliseconds"]').checked;
            
            // 如果是秒级但长度为13位，转为毫秒
            if (!isMilliseconds && timestamp.length === 13) {
                isMilliseconds = true;
            }
            
            // 如果是秒级，转为毫秒
            if (!isMilliseconds) {
                ts = ts * 1000;
            }
            
            const date = new Date(ts);
            
            // 检查是否有效日期
            if (isNaN(date.getTime())) {
                timestampResult.textContent = '无效的时间戳';
                return;
            }
            
            // 根据时区显示
            const timezone = timezoneSelect.value;
            let result = '';
            
            switch (timezone) {
                case 'local':
                    result = `本地时间: ${formatDateTime(date)}`;
                    break;
                case 'UTC':
                    result = `UTC时间: ${formatUTCDateTime(date)}`;
                    break;
                case 'GMT+8':
                    const gmt8Date = new Date(date.getTime() + 8 * 3600 * 1000);
                    result = `GMT+8: ${gmt8Date.getUTCFullYear()}-${padZero(gmt8Date.getUTCMonth() + 1)}-${padZero(gmt8Date.getUTCDate())} ${padZero(gmt8Date.getUTCHours())}:${padZero(gmt8Date.getUTCMinutes())}:${padZero(gmt8Date.getUTCSeconds())}`;
                    break;
                case 'GMT+0':
                    result = `GMT+0: ${formatUTCDateTime(date)}`;
                    break;
                case 'GMT-5':
                    const gmtMinus5Date = new Date(date.getTime() - 5 * 3600 * 1000);
                    result = `GMT-5: ${gmtMinus5Date.getUTCFullYear()}-${padZero(gmtMinus5Date.getUTCMonth() + 1)}-${padZero(gmtMinus5Date.getUTCDate())} ${padZero(gmtMinus5Date.getUTCHours())}:${padZero(gmtMinus5Date.getUTCMinutes())}:${padZero(gmtMinus5Date.getUTCSeconds())}`;
                    break;
                case 'GMT+9':
                    const gmt9Date = new Date(date.getTime() + 9 * 3600 * 1000);
                    result = `GMT+9: ${gmt9Date.getUTCFullYear()}-${padZero(gmt9Date.getUTCMonth() + 1)}-${padZero(gmt9Date.getUTCDate())} ${padZero(gmt9Date.getUTCHours())}:${padZero(gmt9Date.getUTCMinutes())}:${padZero(gmt9Date.getUTCSeconds())}`;
                    break;
            }
            
            // 添加额外信息
            result += `\n时间戳(秒): ${Math.floor(ts / 1000)}`;
            result += `\n时间戳(毫秒): ${ts}`;
            result += `\n星期${['日', '一', '二', '三', '四', '五', '六'][date.getDay()]}`;
            result += `\n年份: ${date.getFullYear()}`;
            result += `\n月份: ${date.getMonth() + 1}`;
            result += `\n日期: ${date.getDate()}`;
            
            timestampResult.textContent = result;
        }

        // 日期转时间戳
        function convertDateToTimestamp() {
            const datetimeValue = datetimeInput.value;
            if (!datetimeValue) {
                alert('请选择日期时间');
                return;
            }
            
            // 解析日期时间
            const date = new Date(datetimeValue);
            
            // 检查是否有效日期
            if (isNaN(date.getTime())) {
                datetimeResult.textContent = '无效的日期时间';
                return;
            }
            
            // 获取时间戳
            const timestampMs = date.getTime();
            const timestampSec = Math.floor(timestampMs / 1000);
            
            // 根据输出格式显示
            const outputType = document.querySelector('input[name="outputType"][value="milliseconds"]').checked ? 'milliseconds' : 'seconds';
            
            let result = '';
            if (outputType === 'milliseconds') {
                result = `${timestampMs} (毫秒级/13位)`;
            } else {
                result = `${timestampSec} (秒级/10位)`;
            }
            
            // 添加额外信息
            result += `\n原始日期: ${formatDateTime(date)}`;
            result += `\nUTC日期: ${formatUTCDateTime(date)}`;
            result += `\n相对时间: ${getTimeAgo(date)}`;
            
            datetimeResult.textContent = result;
        }

        // 获取相对时间
        function getTimeAgo(date) {
            const now = new Date();
            const diff = now - date;
            
            const seconds = Math.floor(diff / 1000);
            const minutes = Math.floor(seconds / 60);
            const hours = Math.floor(minutes / 60);
            const days = Math.floor(hours / 24);
            
            if (days > 0) return `${days}天${hours % 24}小时前`;
            if (hours > 0) return `${hours}小时${minutes % 60}分钟前`;
            if (minutes > 0) return `${minutes}分钟${seconds % 60}秒前`;
            return `${seconds}秒前`;
        }

        // 设置当前日期时间
        function setCurrentDatetime() {
            const now = new Date();
            datetimeInput.value = formatDatetimeLocal(now);
        }

        // 批量转换
        function batchConvert() {
            const input = batchInput.value.trim();
            if (!input) {
                alert('请输入批量转换的内容');
                return;
            }
            
            const lines = input.split('\n').filter(line => line.trim());
            const batchType = document.querySelector('input[name="batchType"][value="toTimestamp"]') ? 'toTimestamp' : 'toDate';
            
            let output = '';
            
            lines.forEach(line => {
                const trimmedLine = line.trim();
                let result = '';
                
                if (batchType === 'toDate') {
                    // 时间戳转日期
                    if (!isNaN(trimmedLine)) {
                        let ts = parseInt(trimmedLine);
                        if (trimmedLine.length === 10) ts = ts * 1000;
                        const date = new Date(ts);
                        if (!isNaN(date.getTime())) {
                            result = `${trimmedLine} → ${formatDateTime(date)}`;
                        } else {
                            result = `${trimmedLine} → 无效的时间戳`;
                        }
                    } else {
                        result = `${trimmedLine} → 不是有效的数字时间戳`;
                    }
                } else {
                    // 日期转时间戳
                    try {
                        // 尝试解析各种日期格式
                        let date = new Date(trimmedLine);
                        if (!isNaN(date.getTime())) {
                            const tsSec = Math.floor(date.getTime() / 1000);
                            const tsMs = date.getTime();
                            result = `${trimmedLine} → 秒级: ${tsSec}, 毫秒级: ${tsMs}`;
                        } else {
                            result = `${trimmedLine} → 无效的日期格式`;
                        }
                    } catch (e) {
                        result = `${trimmedLine} → 解析失败: ${e.message}`;
                    }
                }
                
                output += result + '\n';
            });
            
            batchOutput.value = output.trim();
        }

        // 初始化
        updateCurrentTime();
        // 每秒更新一次当前时间
        setInterval(updateCurrentTime, 1000);
    </script>
</body>
</html>